<md-content>
    <md-dialog aria-label="Новая задача">
        <form>
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>
                        <span translate="TASKS.CREATE.NEW.HEADER"></span>
                    </h2>
                    <span flex></span>
                </div>
            </md-toolbar>
            <md-dialog-content style=" max-height:810px;
                padding: 15px;
            ">
                <div>
                    <div class="panel-body text-center">

                        <div>
                            <table class="{{$root.tableClasses}}">
                                <thead>
                                <tr>

                                </tr>
                                </thead>
                                <tbody>
                                <tr data-ng-class="{'danger' : !task.name}">
                                    <td>
                                        <span translate="TASKS.CREATE.NEW.NAME"></span>
                                    </td>
                                    <td><input type="text" class="form-control"
                                               ng-model="task.name" placeholder="{{'TASKS.CREATE.NEW.NAME.PLACEHOLDER' | translate}}">
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span translate="TASKS.CREATE.NEW.DESCRIPTION"></span>
                                    </td>
                                    <td><textarea type="text" class="form-control"
                                                  ng-model="task.fullText" placeholder="{{'TASKS.CREATE.NEW.DESCRIPTION.PLACEHOLDER' | translate}}">
                                        </textarea>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span translate="TASKS.START_DATE"></span>
                                    </td>
                                    <td>
                                        <div class="col-md-12">
                                            <div class="dropdown">
                                                <a class="dropdown-toggle" id="dLabel" role="button"
                                                   data-toggle="dropdown"
                                                   data-target="#" href="">

                                                    <p> {{ $root.printDate(task.startDate) }}</p>

                                                </a>
                                                <ul class="dropdown-menu" style=""
                                                    role="menu"
                                                    aria-labelledby="dLabel">
                                                    <datetimepicker
                                                            ng-model="task.startDate"
                                                            data-datetimepicker-config="{ dropdownSelector: '.dropdown-toggle' }"></datetimepicker>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span translate="TASKS.FINAL_DATE"></span>
                                    </td>
                                    <td>
                                        <div class="dropdown">
                                            <a class="dropdown-toggle" id="dLabel2" role="button"
                                               data-toggle="dropdown"
                                               data-target="#" href="">
                                                <p> {{ $root.printDate(task.finalDate) }}</p>
                                            </a>
                                            <ul class="dropdown-menu" style=""
                                                role="menu"
                                                aria-labelledby="dLabel2">
                                                <datetimepicker
                                                        ng-model="task.finalDate"
                                                        data-datetimepicker-config="{ dropdownSelector: '.dropdown-toggle' }"></datetimepicker>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span translate="TASKS.PRIORITY"></span>
                                    </td>
                                    <td>

                                        <div class="row">
                                            <div class="col-md-1">
                                                <i class="fa fa-star-o" ng-if="!task.favourite"
                                                   data-ng-click="task.favourite = true" style="  font-size: 200%;"
                                                   tooltip-placement="right" tooltip="{{'TASKS.PRIORITY.IMPORTANT.TOOLTIP.MARK_AS_IMPORTANT' | translate}}"
                                                   tooltip-append-to-body="true"
                                                ></i>
                                                <i class="fa fa-star" ng-if="task.favourite"
                                                   data-ng-click="task.favourite = false"
                                                   style="  font-size: 200%; color: rgb(233, 66, 46);"
                                                   tooltip-placement="right" tooltip="{{'TASKS.PRIORITY.IMPORTANT.TOOLTIP.MARK_AS_NONIMPORTANT' | translate}}"
                                                   tooltip-append-to-body="true"
                                                ></i>
                                            </div>

                                            <div class="col-md-9">
                                                <span class="ui-select" style="width: 70px;">
                                                        <select data-ng-model="task.priority" convert-to-number>
                                                            <option value="1" ng-selected="task.priority == 1">
                                                                1
                                                            </option>
                                                            <option value="2" ng-selected="task.priority == 2">
                                                                2
                                                            </option>
                                                            <option value="3" ng-selected="task.priority == 3">
                                                                3
                                                            </option>
                                                            <option value="4" ng-selected="task.priority == 4">
                                                                4
                                                            </option>
                                                            <option value="5" ng-selected="task.priority == 5">
                                                                5
                                                            </option>
                                                            <option value="6" ng-selected="task.priority == 6">
                                                                6
                                                            </option>
                                                        </select>
                                                    </span>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span translate="RESPONSIBLE"></span>
                                    </td>
                                    <td>
                                        <user-accounts-selector ng-model="task.responsibles.userAccountsIDs"></user-accounts-selector>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
                <md-button class="md-raised md-primary" ng-disabled="task.name == ''"
                           ng-click="addTask(); showNewTask = !showNewTask" style="margin-right:20px;">
                    <span translate="TASKS.CREATE.NEW.BUTTON"></span>
                </md-button>
            </md-dialog-actions>
        </form>
    </md-dialog>
</md-content>